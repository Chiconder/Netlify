

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeonardoBot - Tutor de Programación</title>
    <style>
    body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .chat-container {
            width: 100%;
            max-width: 800px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s ease;
        }

        h1 {
            text-align: center;
            color: #333;
            margin: 0 0 20px;
            transition: color 0.3s ease;
        }

        #chatbox {
            border: 1px solid #ccc;
            padding: 10px;
            height: 500px;
            overflow-y: scroll;
            margin-bottom: 10px;
            background-color: #fafafa;
            border-radius: 8px;
            flex-grow: 1;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        #chat-log {
            list-style-type: none;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .chat-message {
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            max-width: 75%;
            line-height: 1.5;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .user-message {
            background-color: #d1e7dd;
            align-self: flex-end;
            text-align: right;
        }

        .bot-message {
            background-color: #f8d7da;
            align-self: flex-start;
            text-align: left;
            white-space: pre-wrap; /* Para mantener el formato de texto con saltos de línea */
        }

        #chat-form {
            display: flex;
            border-top: 1px solid #ccc;
            padding-top: 10px;
            transition: border-color 0.3s ease;
        }

        #user-input {
            flex: 1;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px 0 0 8px;
            background-color: #fff;
            font-size: 16px;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        button {
            padding: 15px;
            border: 1px solid #007bff;
            background-color: #007bff;
            color: white;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .settings {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
        }

        .settings label {
            margin-right: 10px;
            font-size: 16px;
            transition: color 0.3s ease;
        }

        .settings input {
            padding: 5px;
            font-size: 16px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .settings button {
            padding: 10px;
            font-size: 16px;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        body.dark-mode {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .chat-container.dark-mode {
            background-color: #333333;
        }

        #chatbox.dark-mode {
            background-color: #2e2e2e;
            border-color: #555;
        }

        .chat-message.dark-mode {
            color: #ffffff;
        }

        .user-message.dark-mode {
            background-color: #4e4e4e;
        }

        .bot-message.dark-mode {
            background-color: #5e5e5e;
        }

        h1.dark-mode {
            color: #ffffff;
        }

        .settings.dark-mode {
            background-color: #333333;
        }

        .settings label.dark-mode {
            color: #ffffff;
        }

        .settings input.dark-mode {
            background-color: #555555;
            color: #ffffff;
        }

        .settings button.dark-mode {
            background-color: #555555;
            border-color: #777777;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="settings">
            <div class="theme-toggle">
                <button id="theme-toggle">Modo Oscuro/Claro</button>
            </div>
            <div>
                <label for="bot-name">Nombre del Bot:</label>
                <input type="text" id="bot-name" placeholder="LeonardoBot">
                <button id="save-bot-name">Guardar</button>
            </div>
        </div>
        <div class="chat-container">
            <h1>LeonardoBot - Tutor de Programación</h1>
            <div id="chatbox">
                <ul id="chat-log"></ul>
            </div>
            <form id="chat-form">
                <textarea id="user-input" placeholder="Escribe tu pregunta aquí..."></textarea>
                <button type="submit">Enviar</button>
            </form>
        </div>
    </div>
    <script>

      const chatForm = document.getElementById('chat-form');
const userInput = document.getElementById('user-input');
const chatLog = document.getElementById('chat-log');
const botNameInput = document.getElementById('bot-name');
const saveBotNameButton = document.getElementById('save-bot-name');

saveBotNameButton.addEventListener('click', () => {
    const botName = botNameInput.value.trim();
    if (botName) {
        localStorage.setItem('botName', botName);
        alert(`Nombre del Bot guardado como ${botName}`);
    }
});
let messages = [
    { role: 'system', content: 'Eres LeonardoBot, un tutor de programación altamente cualificado y paciente. Tu objetivo es ayudar a los estudiantes a entender conceptos de programación de manera clara y detallada. Siempre proporcionas ejemplos de código cuando sea necesario y explicas cada paso del proceso de manera comprensible. Además, animas a los estudiantes y les das consejos prácticos para mejorar sus habilidades. Cuando te pidan que expliques un concepto, incluye ejemplos relacionados con Pokémon, Mario Bros o Smash Bros de manera aleatoria. Estos ejemplos pueden ayudar a los estudiantes a comprender mejor los conceptos de programación. Por ejemplo, si te piden que expliques ciclos, podrías decir: "Un ciclo en programación es una estructura que permite repetir un conjunto de instrucciones. Imagina que estás en un juego de Pokémon y necesitas recorrer todas las criaturas en tu equipo para verificar su estado de salud. Usarías un ciclo para revisar cada Pokémon uno por uno y asegurarte de que todos estén listos para la batalla. O podrías decir: "Un ciclo en programación es una estructura que permite repetir un conjunto de instrucciones. Piensa en Mario Bros, donde Mario necesita recolectar todas las monedas en un nivel. Usarías un ciclo para mover a Mario por el nivel y recoger cada moneda hasta que no quede ninguna." O podrías decir: "Un ciclo en programación es una estructura que permite repetir un conjunto de instrucciones. Considera Smash Bros, donde cada personaje tiene que realizar su ataque especial un número determinado de veces. Usarías un ciclo para asegurarte de que cada personaje realice su ataque especial hasta alcanzar el límite." Utiliza estos tipos de ejemplos para hacer que los conceptos de programación sean más accesibles y entretenidos para los estudiantes.y en cada mensaje le daras 3 opciones para avanzar hasta que termine su objetivo' }
];

async function getBotResponse(message) {
    messages.push({ role: 'user', content: message });
    
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
                    'Content-Type': 'application/json',
                                  'Authorization': `Bearer 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`,

                },
                body: JSON.stringify({
            model: 'gpt-3.5-turbo-0125',
            messages: messages
        })
    });
    const data = await response.json();
    const botMessage = data.choices[0].message.content;
    messages.push({ role: 'assistant', content: botMessage });
    return botMessage;
}

function addMessageToChatLog(message, isUser) {
    const messageElement = document.createElement('li');
    messageElement.textContent = message;
    messageElement.classList.add('chat-message');
    messageElement.classList.add(isUser ? 'user-message' : 'bot-message');
    chatLog.appendChild(messageElement);
    chatLog.scrollTop = chatLog.scrollHeight;
}

chatForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const userMessage = userInput.value.trim();
    if (userMessage) {
        addMessageToChatLog(userMessage, true);
        userInput.value = '';
        const botResponse = await getBotResponse(userMessage);
        addMessageToChatLog(botResponse, false);
    }
});
function saveChatHistory() {
    localStorage.setItem('chatHistory', JSON.stringify(messages));
}

function loadChatHistory() {
    const storedMessages = JSON.parse(localStorage.getItem('chatHistory'));
    if (storedMessages) {
        messages = storedMessages;
        messages.forEach(message => {
            addMessageToChatLog(message.content, message.role === 'user');
        });
    }
}

window.addEventListener('load', loadChatHistory);
chatForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const userMessage = userInput.value.trim();
    if (userMessage) {
        addMessageToChatLog(userMessage, true);
        userInput.value = '';
        const botResponse = await getBotResponse(userMessage);
        addMessageToChatLog(botResponse, false);
        saveChatHistory();
    }
});
const themeToggle = document.getElementById('theme-toggle');
themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    document.querySelector('.chat-container').classList.toggle('dark-mode');
    document.getElementById('chatbox').classList.toggle('dark-mode');
    document.querySelectorAll('.chat-message').forEach(message => {
        message.classList.toggle('dark-mode');
    });
});

    </script>
</body>
</html>
